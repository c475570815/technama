<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>录入评价结果</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="/static/sui/css/sm.css">
    <link rel="stylesheet" href="/static/sui/css/sm-extend.min.css">
</head>
<body>
<!-- header  -->
<header class="bar bar-nav">
    <h1 class='title'>评价结果</h1>
</header>
<!-- content  -->
<div class="content">
    <!-- 显示听课安排信息 -->
    <div class="card">
        <div style="background-color:#ddf" valign="bottom" class="card-header color-white no-border">
            {$vo.teach_name}（{$vo.teach_id}） 第{$vo.week}周/星期{$vo.xing_qi_ji}/{$vo.section}节
        </div>
        <div class="card-content">
            <div class="card-content-inner">
                <p>课程：{$vo.course_name} 教室：{$vo.class_room}  <br/>班级：{$vo.class_name} 人数：{$vo.stu_due_number}</p>
            </div>
        </div>
        <!--<div class="card-footer">-->
            <!--<a href="#" class="link confirm-ok-cancel" id="{$vo.id}">{$vo.finished=="完成"?"已完成":"确定已完成听课"}</a>-->
        <!--</div>-->
    </div>
    <!-- 听课记录表单录入 -->
    <form id="frm_record">
        <div class="list-block">
            <ul>
                <!-- Date -->
                <li>
                    <div class="item-content">
                        <div class="item-media"><i class="icon icon-form-calendar"></i></div>
                        <div class="item-inner">
                            <div class="item-title label">听课时间</div>
                            <div class="item-input">
                                <input type="date" id="time" placeholder="实际听课时间" value="" name="data[time]">
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="item-content">
                        <div class="item-media"><i class="icon icon-form-toggle"></i></div>
                        <div class="item-inner">
                            <div class="item-title label">总体评价</div>
                            <div class="item-input">
                                <input type="text" id='picker' name="data[last_evaluate]"/>
                            </div>
                        </div>
                    </div>
                </li>

                <li class="align-top">
                    <div class="item-content">
                        <div class="item-media"><i class="icon icon-form-comment"></i></div>
                        <div class="item-inner">
                            <div class="item-title label">评语和建议</div>
                            <div class="item-input">
                                <textarea id="comments" name="data[comments]"></textarea>
                            </div>
                        </div>
                    </div>
                </li>
                <!-- Switch (Checkbox) -->
                <li>
                    <div class="item-content">
                        <div class="item-media"><i class="icon icon-form-toggle"></i></div>
                        <div class="item-inner">
                            <div class="item-title label" style="width:70%">准备充分、文件齐备</div>
                            <div class="item-input">
                                <label class="label-switch">
                                    <input type="checkbox" name="data[detail][1]" value="是">
                                    <div class="checkbox"></div>
                                </label>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="item-content">
                        <div class="item-media"><i class="icon icon-form-toggle"></i></div>
                        <div class="item-inner">
                            <div class="item-title label" style="width:70%">按时上下课</div>
                            <div class="item-input">
                                <label class="label-switch">
                                    <input type="checkbox" name="data[detail][2]" value="是">
                                    <div class="checkbox"></div>
                                </label>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="item-content">
                        <div class="item-media"><i class="icon icon-form-toggle"></i></div>
                        <div class="item-inner">
                            <div class="item-title label" style="width:70%">普通话授课，文字书写规范</div>
                            <div class="item-input">
                                <label class="label-switch">
                                    <input type="checkbox" name="data[detail][3]" value="是">
                                    <div class="checkbox"></div>
                                </label>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="item-content">
                        <div class="item-media"><i class="icon icon-form-toggle"></i></div>
                        <div class="item-inner">
                            <div class="item-title label" style="width:70%">无不当言行</div>
                            <div class="item-input">
                                <label class="label-switch">
                                    <input type="checkbox" name="data[detail][4]" value="是">
                                    <div class="checkbox"></div>
                                </label>
                            </div>
                        </div>
                    </div>
                </li>

                <!--<li>-->
                    <!--<div class="item-content">-->
                        <!--<div class="item-media"><i class="icon icon-form-toggle"></i></div>-->
                        <!--<div class="item-inner">-->
                            <!--<div class="item-title label" style="width:50%">教师衣着，仪态</div>-->
                            <!--<div class="item-input">-->
                                <!--<input type="text" id='picker2' name="data[detail][5]"/>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</li>-->
            </ul>
        </div>
        <div class="content-block">
            <div class="row">
                <div class="col-50"><a href="#" class="button button-big button-fill button-danger">取消</a></div>
                <div class="col-50"><a href="#" class="button button-big button-fill button-success"
                                       id="btn_save">提交</a></div>
            </div>
        </div>
        <!-- hidden -->
        <input type="hidden" name="id" value="{$vo.id}"/>
        <input type="hidden" name="data[listener_no]" value=""/>
    </form>
</div>
<script type='text/javascript' src='/static/sui/js/zepto.js' charset='utf-8'></script>
<script type='text/javascript' src='/scripts/mobile/config.js' charset='utf-8'></script>
<script type='text/javascript' src='/static/sui/js/sm.min.js' charset='utf-8'></script>
<script type='text/javascript' src='/static/sui/js/sm-extend.min.js' charset='utf-8'></script>
<script type='text/javascript' src='/static/sui/js/picker.js' charset='utf-8'></script>
<script type='text/javascript' src='/scripts/mobile/app.js' charset='utf-8'></script>
<script>
    $(document).on('click', '#btn_save', function () {
        var _id = $(this).attr("id");
        //判断输入是否完成
        var _time=$.trim($("#time").val());
        var _picker=$.trim($("#picker").val());
        var _comments=$.trim($("#comments").val());
        if(_time=="" || _picker=="" || _comments==""){
            $.toast("你没有完成，请完成填写后再提交！");
            return ;
        }
        var jsonData = $("#frm_record").serializeArray();

        $.confirm('确定已完成听课任务?',
                function () {
                    $.ajax({
                        type: "POST",
                        url: "/index.php/teacher/index/saverecord",
                        data: jsonData,   //序列化
                        success: function (data) {
                            if (data.success == true) {
//                                console.log(data);
                                $.toast('操作成功，4秒后跳转...', 3000, 'success top');
                                var t=setTimeout("document.location = '/index.php/teacher/index/index';",4000)

                            }
                        }
                    });
                },
                function () {
                    $.alert('取消');
                }
        );
    });
</script>
</body>
</html>
